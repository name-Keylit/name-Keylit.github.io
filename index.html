<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Keylit - KCI ë…¼ë¬¸ ê²€ìƒ‰</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f8fc;
      color: #2e2e2e;
    }

    header {
      background-color: #7c4dff;
      color: white;
      padding: 20px 40px;
      font-size: 28px;
      font-weight: bold;
      display: flex;
      align-items: center;
    }

    #menu-icon {
      font-size: 24px;
      cursor: pointer;
      margin-right: 20px;
    }

    #sidebar {
      position: fixed;
      top: 0;
      left: -250px;
      width: 250px;
      height: 100%;
      background-color: #5e35b1;
      color: white;
      padding: 60px 20px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.3);
      transition: left 0.3s ease;
      z-index: 1000;
    }

    #sidebar a {
      color: white;
      text-decoration: none;
      display: block;
      margin: 20px 0;
      font-size: 18px;
    }

    #sidebar.active {
      left: 0;
    }

    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 60px 20px;
    }

    h1 {
      font-size: 32px;
      color: #7c4dff;
      margin-bottom: 20px;
    }

    input[type="text"] {
      width: 60%;
      max-width: 600px;
      padding: 14px 20px;
      font-size: 16px;
      border: 2px solid #7c4dff;
      border-radius: 8px;
      margin-bottom: 30px;
    }

    .keywords {
      font-size: 14px;
      color: #555;
    }

    .keywords span {
      background-color: #e8dcff;
      color: #5e35b1;
      padding: 6px 10px;
      margin: 4px;
      border-radius: 14px;
      display: inline-block;
      cursor: pointer;
    }

    #results {
      max-width: 800px;
      margin-top: 40px;
    }

    footer {
      margin-top: 80px;
      text-align: center;
      font-size: 12px;
      color: #aaa;
    }

    button {
      margin-top: 8px;
      background-color: #7c4dff;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background-color: #5e35b1;
    }
  </style>
</head>
<body>

  <header>
    <div id="menu-icon" onclick="toggleSidebar()">â˜°</div>
    Keylit
  </header>

  <div id="sidebar">
    <a href="#" onclick="goHome()">í™ˆ</a>
    <a href="#" onclick="showFavorites()">ì¦ê²¨ì°¾ê¸°</a>
    <a href="#" onclick="showRecent()">ìµœê·¼ ê²€ìƒ‰</a>
  </div>

  <main>
    <h1>ë…¼ë¬¸ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš” ğŸ”</h1>
    <input id="searchInput" type="text" placeholder="í‚¤ì›Œë“œ ë˜ëŠ” ë…¼ë¬¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" onkeydown="if(event.key==='Enter') searchKCIPapers()"/>

    <div class="keywords">
      ì¶”ì²œ í‚¤ì›Œë“œ:
      <span onclick="quickSearch('ë”¥ëŸ¬ë‹')">ë”¥ëŸ¬ë‹</span>
      <span onclick="quickSearch('ìì—°ì–´ì²˜ë¦¬')">ìì—°ì–´ì²˜ë¦¬</span>
      <span onclick="quickSearch('ê°•í™”í•™ìŠµ')">ê°•í™”í•™ìŠµ</span>
      <span onclick="quickSearch('ë°ì´í„°ë§ˆì´ë‹')">ë°ì´í„°ë§ˆì´ë‹</span>
      <span onclick="quickSearch('AI')">AI</span>
    </div>
  </main>

  <footer>Â© 2025 Keylit</footer>

  <script>
    const favorites = [];
    const recentQueries = [];

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    function clearResults() {
      const old = document.getElementById('results');
      if (old) old.remove();
    }

    function displayResults(papers) {
      clearResults();
      const container = document.createElement('div');
      container.id = 'results';

      papers.forEach(paper => {
        const item = document.createElement('div');
        item.style.borderBottom = '1px solid #ccc';
        item.style.padding = '10px 0';
        item.innerHTML = `
          <h3 style="color:#5e35b1">${paper.title}</h3>
          <p><strong>ì €ì:</strong> ${paper.author}</p>
          <p><strong>ì´ˆë¡:</strong><br>${paper.abstract}</p>
          <a href="${paper.link}" target="_blank">ë…¼ë¬¸ ë§í¬</a><br>
          <button onclick='addFavorite(${JSON.stringify(paper)})'>â­ ì¦ê²¨ì°¾ê¸°</button>
        `;
        container.appendChild(item);
      });

      document.querySelector('main').appendChild(container);
    }

    function addFavorite(paper) {
      favorites.push(paper);
      alert("ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ë¨!");
    }

    function goHome() {
      location.reload();
    }

    function showFavorites() {
      clearResults();
      const container = document.createElement('div');
      container.id = 'results';
      container.innerHTML = `<h3>ì¦ê²¨ì°¾ê¸°</h3><ul>${favorites.map(f => `<li><a href="${f.link}" target="_blank">${f.title}</a></li>`).join('')}</ul>`;
      document.querySelector('main').appendChild(container);
    }

    function showRecent() {
      clearResults();
      const container = document.createElement('div');
      container.id = 'results';
      container.innerHTML = `<h3>ìµœê·¼ ê²€ìƒ‰ì–´</h3><ul>${recentQueries.map(q => `<li>${q}</li>`).join('')}</ul>`;
      document.querySelector('main').appendChild(container);
    }

    function quickSearch(keyword) {
      document.getElementById('searchInput').value = keyword;
      searchKCIPapers();
    }

    async function searchKCIPapers() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) return alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      recentQueries.unshift(query);
      if (recentQueries.length > 10) recentQueries.pop();

      const API_KEY = "27502279"; // â† ì—¬ê¸°ì— ì‹¤ì œ ì¸ì¦í‚¤ ì…ë ¥
      const url = `https://api.kci.go.kr/openapi/service/rest/ArticleInfoService/getArticleList?ServiceKey=${API_KEY}&searchKeyword=${encodeURIComponent(query)}&numOfRows=10&pageNo=1`;

      try {
        const response = await fetch(url);
        const xml = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xml, "text/xml");
        const items = xmlDoc.getElementsByTagName("item");

        const papers = Array.from(items).map(item => ({
          title: item.getElementsByTagName("title")[0]?.textContent || "ì œëª© ì—†ìŒ",
          author: item.getElementsByTagName("author")[0]?.textContent || "ì €ì ì—†ìŒ",
          abstract: item.getElementsByTagName("abstract")[0]?.textContent || "ì´ˆë¡ ì—†ìŒ",
          link: item.getElementsByTagName("link")[0]?.textContent || "#"
        }));

        displayResults(papers);
      } catch (error) {
        alert("API ìš”ì²­ ì‹¤íŒ¨: ì¸ì¦í‚¤ ì˜¤ë¥˜ë‚˜ ì„œë²„ ë¬¸ì œì¼ ìˆ˜ ìˆì–´ìš”.");
        console.error(error);
      }
    }
  </script>
</body>
</html>
